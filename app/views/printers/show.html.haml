/ .container
.row
  .col-xs-3
    %h3
      Système d'impression :
  .col-xs-3
    - if current_user.is? :ADMIN
      = simple_form_for(@printer, url: update_code_printers_printer_path(params[:id]),data: { confirm: "Etes vous sur de vouloir modifier le code du système d'impression ?" }, method: :patch) do |f|
        %b
          = f.input :code_printers , :input_html => { :style => "width:100%;" }, label: false, value: @printer.code_printers
        = f.button :submit, class: "btn btn-block btn-primary", value:'Modifier'
    - else
      %b= @printer.code_printers 
  .col-xs-1{style: "margin-top: 15px;"} 
    - if current_user.is? :ADMIN
      = button_to "Supprimer", @printer, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer le système d'impression et tous ces composants ?" }, class: "btn btn btn-danger"
  .col-xs-2
    %h3{style: "text-align:center;"}
      NbIncident  :
      %b
        = @NbIncident
  .col-xs-2
    %h3
      NbConso  :
      %b
        = @Nbconsommable
/ %h3
/   Nom image de l'imp  :
/   %b
/     = @printer.img
/ %p
/
/ Nav tabs
%br
.dropdown
  %ul#myTab.nav.nav-tabs{:role => "tablist"}
    %li.active
      %a{"data-toggle" => "tab", :href => "#descriptImprimante", :role => "tab"} Description Système d'impression
    - if current_user.is? :ADMIN
      %li.dropdown
        %a#myTabDrop1.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
          Incident
          %span.caret
        %ul.dropdown-menu{"aria-labelledby" => "myTabDrop1", :role => "menu"}
          %li
            %a{"data-toggle" => "tab", :href => "#incidentTrue", :role => "tab"} Incident Validé
          %li
            %a{"data-toggle" => "tab", :href => "#incidentFalse", :role => "tab"} Incident Non Validé
    - else
      %li
        %a{"data-toggle" => "tab", :href => "#incidentTrue", :role => "tab"} Incidents


    - if can? :valide, Consommable
      %li.dropdown
        %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
          Consommable
          %span.caret
        %ul.dropdown-menu{"aria-labelledby" => "myTabDrop1", :role => "menu"}
          %li
            %a{"data-toggle" => "tab", :href => "#consommableTrue", :role => "tab"} Consommable Validé
          %li
            %a{"data-toggle" => "tab", :href => "#consommableFalse", :role => "tab"} Consommable Non Validé
    - else
      %li
        %a{"data-toggle" => "tab", :href => "#consommableTrue", :role => "tab"} Consommables


    - if can? :valide, Printer
      %li.dropdown
        %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
          Compteur
          %span.caret
        %ul.dropdown-menu{"aria-labelledby" => "myTabDrop1", :role => "menu"}
          %li
            %a{"data-toggle" => "tab", :href => "#compteurTrue", :role => "tab"} Compteur Validé
          %li
            %a{"data-toggle" => "tab", :href => "#compteurFalse", :role => "tab"} Compteur Non Validé
    - else
      %li
        %a{"data-toggle" => "tab", :href => "#compteurTrue", :role => "tab"} Compteurs
    
    
    %li.dropdown
      - if can? :create, Incident
        %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
          Ajouter
          %span.caret
      %ul.dropdown-menu{"aria-labelledby" => "myTabDrop1", :role => "menu"}
        %li
          %a{"data-toggle" => "tab", :href => "#ajouterIncident", :role => "tab"} Incident
        %li
          %a{"data-toggle" => "tab", :href => "#ajouterConsommable", :role => "tab"} Consommable
        %li
          %a{"data-toggle" => "tab", :href => "#ajouterCompteur", :role => "tab"} Compteur
       
  / Tab panes
  .tab-content
    / Onglet DESCRIPTION IMPRIMANTE
    #descriptImprimante.tab-pane.fade.in.active{"border-radius" => "10px"}
      %h3
        %u Description du système d'impression :
      
      #accordion.panel-group{"aria-multiselectable" => "true", :role => "tablist"}
      .panel.panel-default
        #headingOne.panel-heading{:role => "tab"}
          %h4.panel-title
            %a{"aria-controls" => "collapseOne", "aria-expanded" => "true", "data-parent" => "#accordion", "data-toggle" => "collapse", :href => "#collapseOne"}
              %b Caractéristique et image du système d'impression
        #collapseOne.panel-collapse.collapse.in{"aria-labelledby" => "headingOne", :role => "tabpanel"}
          .panel-body
            - if @printer.attachments.count > 0
              / ****************** Slide des images : ******************
              #carousel-example-generic.carousel.slide{:style => "width:300px; float:left;","data-ride" => "carousel", "data-spy" => "scroll"}
                / Indicators
                %ol.carousel-indicators
                  %li.active{"data-slide-to" => "0", "data-target" => "#carousel-example-generic"}
                  - if File.extname(@attachments[0].file.to_s) != ".pdf"
                      
                    - for i in 1..@attachments.count - 1
                      - if File.extname(@attachments[i].file.to_s) != ".pdf"
                        - puts "8888888888888888888888888888888888888888888888888888888"
                        - puts "*******************************************************"
                        - puts "*******************************************************"
                        - puts File.extname(@attachments[i].file.to_s) != ".pdf"
                        - puts "*******************************************************"
                        - puts "*******************************************************"
                        - puts File.extname(@attachments[i].file.to_s)
                        - puts "*******************************************************"
                        - puts "*******************************************************"
                        - puts @attachments.count 
                        - puts "*******************************************************"
                        - puts "*******************************************************"
                        %li{"data-slide-to" => "i", "data-target" => "#carousel-example-generic"}
                      / %li{"data-slide-to" => "2", "data-target" => "#carousel-example-generic"}
                      / %li{"data-slide-to" => "3", "data-target" => "#carousel-example-generic"}
                  
                / Wrapper for slides
                .carousel-inner{:role => "listbox"}
                  - if @attachments.count > 0
                    .item.active
                      = image_tag(@attachments[0].file_url(:thumb),:style => "margin-left:70px;")
                      / = image_tag(@printer.img_url(:thumb),:style => "margin-left:70px;")
                      %p
                        = File.basename(@attachments[0].file.to_s)
                      .carousel-caption
                      
                        / = image_tag(@attachments[1].file,:style => "margin-left:70px;")
                    - @attachments.each do |a|
                      - puts File.extname(a.file.to_s)
                      - puts "///////////////////////////////////" 
                      - puts @attachments[0].file.to_s
                      - puts "44444444444444444444444444444"
                      - if a.file != @attachments[0].file && File.extname(a.file.to_s) != ".pdf"
                        .item
                          = image_tag(a.file_url(:thumb),:style => "margin-left:70px;")
                          %p
                            = File.basename(a.file.to_s)
                      / .item
                      /   = image_tag(@attachments[2].file,:style => "margin-left:70px;")
                      / .item
                      /   = image_tag(@attachments[2].file,:style => "margin-left:70px;")
                / Controls
                %a.left.carousel-control{"data-slide" => "prev", :href => "#carousel-example-generic", :role => "button"}
                  %span.glyphicon.glyphicon-chevron-left{"aria-hidden" => "true"}
                  %span.sr-only Previous
                %a.right.carousel-control{"data-slide" => "next", :href => "#carousel-example-generic", :role => "button"}
                  %span.glyphicon.glyphicon-chevron-right{"aria-hidden" => "true"}
                  %span.sr-only Next
              
                / = @printer.description_printers
            - if current_user.is? :ADMIN
              = simple_form_for(@printer, url: update_description_printer_path(params[:id]),data: { confirm: "Etes vous sur de vouloir modifier la description ?" }, method: :patch) do |f|
                %table.table-bordered{:style => "margin-left: inherit;"}
                  %tr
                    %td
                      = f.cktext_area :description_printers , :ckeditor => {:height => '250', :width => '780'},:spellcheck => false, :required => true , :value => @printer.description_printers
                  %tr
                    %td
                      = f.hidden_field :nature, :value => "description"
                      = f.button :submit, "Modifier" , class: "btn btn-lg btn-primary btn-block"
            - else
              %p
                = cktext_area_tag :description_printers ,  @printer.description_printers, disabled: true, :ckeditor => {:height => '250', :width => '1050'}
      / ************************** Colapse Pieces Jointes  du Printer : **************************
      / - if current_user.is? :ADMIN
      .panel.panel-default
        #headingTwo.panel-heading{:role => "tab"}
          %h4.panel-title
            %a.collapsed{"aria-controls" => "collapseTwo", "aria-expanded" => "false", "data-parent" => "#accordion", "data-toggle" => "collapse", :href => "#collapseTwo"}
              %b Pieces Jointes du système d'impression
        #collapseTwo.panel-collapse.collapse{"aria-labelledby" => "headingTwo", :role => "tabpanel"}
          .panel-body
            - if current_user.is? :ADMIN
              = simple_form_for(@printer, url: update_description_printer_path(params[:id]),data: { confirm: "Etes vous sur de vouloir modifier les pieces jointes ?" }, method: :patch) do |f|
                %table.navBar.table-bordered{:style => "margin-left: inherit; width: 100%;"}
                  %tr
                    %td
                      %table.table-bordered{:style => "margin-left: 0px;width:100%;"}
                        %thead
                          %th Nom
                          %th Choisir fichier
                          %th Supprimer
                        %tbody
                          = f.simple_fields_for :attachments , @attachments  do |p| 
                            %tr
                              - if File.extname(@printer.attachments[p.index].file.to_s) != ".pdfr"
                                %td
                                  / Button trigger modal
                                  = link_to("#{File.basename(@printer.attachments[p.index].file.to_s)}", printer_download_path(:printer_id => @printer.id, :id => @printer.attachments[p.index].file.to_s ))
                                  / = link_to 'Show', @attachments, :action => :download, :input_html => {:target => "_blank"}
                                / - else
                                / %td 
                                /   = File.basename(@printer.attachments[p.index].file.to_s)
                              %td
                                = p.input :file, as: :file, label: false, class: "uploadBox"
                              %td 
                                = link_to 'Supprimer', @printer.attachments[p.index], :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer la piece jointe ?" },:class => 'delete_attachment'
         
                  %tr
                    %td
                      = f.hidden_field :nature, :value => "pj"
                      = f.button :submit, "Modifier les pieces jointes" , class: "btn btn-lg btn-primary btn-block", id: "update_attachments_printer",data:{delete: false}, :disabled => true
              %br/
              %br/
              %br/
              %span.glyphicon.glyphicon-paperclip
              %button.btn.btn-lg.btn-primary{"data-target" => "#myModal", "data-toggle" => "modal", :type => "button"}
                
                Ajouter Nouvelle Piece Jointe
              / Modal
              #myModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1" }
                .modal-dialog
                  .modal-content{:style => "height:300px;"} 
                    .modal-header
                      %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
                        %span{"aria-hidden" => "true"} 
                      %h4#myModalLabel.modal-title Ajouter une nouvelle piece jointe
                    .modal-body
                      = simple_form_for @attachment do |f|
                        %table{:align => "left", :style => "border : none;"}
                          %tr
                            %td
                              / = f.label "Ajouter nouvelle image"
                              = f.input :file, as: :file
                              = f.hidden_field :printer_id, :value => @printer.id
                            %td
                              = f.button :submit, "Valider" , class: "btn btn-primary "
                            %br
                            %td
                              %span.input-group-btn{style: "margin-left: 100px;"}
                                %button.btn.btn-primary{"data-dismiss" => "modal", :type => "button", :style => "margin-left:30px;"} Close
                              
                                
            - else 
              %table.navBar.table-bordered{:style => "margin-left: inherit; width: 100%;"}
                %tr
                  %td
                    %table.table-bordered{:style => "margin-left: 0px;width:100%;"}
                      %thead
                        %th Nom
                      %tbody
                        
                        = simple_form_for(@printer, url: update_description_printer_path(params[:id]),data: { confirm: "Etes vous sur de vouloir modifier les pieces jointes ?" }, method: :patch) do |f|
                          = f.simple_fields_for :attachments , @attachments  do |p|
                            %tr
                              %td
                                / Button trigger modal
                                = link_to("#{File.basename(@printer.attachments[p.index].file.to_s)}", printer_download_path(:printer_id => @printer.id, :id => @printer.attachments[p.index].file.to_s ))
                                / = link_to 'Show', @attachments, :action => :download, :input_html => {:target => "_blank"}  
                          
                             
                             
         
                  
              
      
        
      
              

      
      /
        <div class="form-group">
        <label for="exampleInputFile">Choisir un fichier :</label>
        <input type="file" id="exampleInputFile">
        
        </div>
    / Fin de l'onglet
    / Onglet INCIDENT
    #incidentTrue.tab-pane.fade
      %h2{:align => "center"} Incidents du système d'impression :
      - if @incidents_true.count >= 1
        %table.table.table-bordered
          %thead
            %tr
              %th ID
              %th CodeIncident
              %th Statut
              - if current_user.is? :ADMIN
                %th Supprimer 
          %tbody
            - @incidents_true.each do |incident|
              %tr
                %td= link_to incident.id, incident
                %td= link_to incident.code_incidents, incident
                %td= link_to "VALIDER", incident
                - if current_user.is? :ADMIN 
                  %td= link_to 'Supprimer', incident, :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer l'incident?" },:class => 'delete_incident'
     
      - else
        %p Il n'y a pas d'incident.
    / Fin de l'onglet
    #incidentFalse.tab-pane.fade
      %h2{:align => "center"} Incidents du système d'impression :
      - if @incidents_false.count >= 1
        %table.table.table-bordered
          %thead
            %tr
              %th ID
              %th CodeIncident
              %th Statut
              - if current_user.is? :ADMIN
                %th Supprimer 
          %tbody
            - @incidents_false.each do |incident|
              %tr
                %td= link_to incident.id, incident
                %td= link_to incident.code_incidents, incident
                %td= link_to "non Valider", incident
                - if current_user.is? :ADMIN 
                  %td= link_to 'Supprimer', incident, :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer l'incident?" },:class => 'delete_incident'
      - else        
        %p Il n'y a pas d'incident a valider.
    / Fin de l'onglet
    #consommableFalse.tab-pane.fade
      %h2 Consommable du système d'impression
      - if @consommables_false.count >= 1
        %table.table.table-bordered
          %thead
            %tr
              %th CodeConsommable
              %th DesignationConsommable
              %th Durée de vie
              %th Remplacement
              - if current_user.is? :ADMIN
                %th Valider 
                %th Supprimer 
                %th Supprimer définitivement
          %tbody
            - @consommables_false.each do |consommable|
              %tr
                %td= link_to  consommable.code_consommables , consommable
                %td= link_to  consommable.designation_consommables,consommable
                %td= link_to  consommable.duree_vie_consommables,consommable
                - @r = Replacement.find(consommable.replacement_id)
                %td= link_to  @r.name,consommable
                - if current_user.is? :ADMIN 
                  %td
                    = link_to 'Valider', consommable, :remote => true, method: :patch, data: { confirm: "Etes vous sur de vouloir valider le consommable?" },:class => 'update_consommables', style: ' -moz-user-select: none;background-image: none; border: 1px solid transparent; border-radius: 4px;   cursor: pointer; display: inline-block;  font-size: 14px; font-weight: normal;  line-height: 1.42857;  margin-bottom: 0;  padding: 6px 12px;   text-align: center;  vertical-align: middle;  white-space: nowrap; background-color: #337ab7; border-color: #2e6da4;  color: white;'
                    / = button_to 'Valider', consommable, :remote => true, method: :patch, data: { confirm: "Etes vous sur de vouloir valider le consommable?" },:class => 'btn btn btn-primary update_consommables'
                    / %button.btn.btn-primary#valid-consommable{data:{consommable: @consommable.id,id: "#{consommable.id}"}}
                    /   = consommable.id
                  %td
                    %button.btn.btn-primary.delete-printers-consommable{data:{consommable: consommable.id, printer: @printer.id}}
                      Supprimer
                    / = link_to 'Supprimer totalement', delete_consommable_consommable_path(consommable), :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer le consommable définitivement ?" },:class => 'delete_consommable'
                  %td
                    = link_to 'Supprimer définitivement', consommable, :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer le consommable définitivement de tous les système d'impression ?"},:class => 'delete_printer_consommable',style: ' -moz-user-select: none;background-image: none; border: 1px solid transparent; border-radius: 4px;   cursor: pointer; display: inline-block;  font-size: 14px; font-weight: normal;  line-height: 1.42857;  margin-bottom: 0;  padding: 6px 12px;   text-align: center;  vertical-align: middle;  white-space: nowrap; background-color: #337ab7; border-color: #2e6da4;  color: white;'
      

      - else
        %p Il n'y a pas de consommable a valider.
    / Fin de l'onglet
    / Onglet CONSOMMABLE
    #consommableTrue.tab-pane.fade
      %h2 Consommable du système d'impression
      - if @consommables_true.count >= 1
        %table.table.table-bordered
          %thead
            %tr
              %th ID
              %th CodeConsommable
              %th DesignationConsommable
              %th Durée de vie
              %th Remplacement
              - if current_user.is? :ADMIN
                %th Supprimer 
                %th Supprimer définitivement
          %tbody.consommable_true_tbody
            - @consommables_true.each do |consommable|
              %tr
                %td= link_to  consommable.id  , consommable
                %td= link_to  consommable.code_consommables  , consommable
                %td= link_to  consommable.designation_consommables,consommable
                %td= link_to  consommable.duree_vie_consommables,consommable
                - @r = Replacement.find(consommable.replacement_id)
                %td= link_to  @r.name,consommable
                - if current_user.is? :ADMIN 
                  %td
                    %button.btn.btn-primary.delete-printers-consommable{data:{consommable: consommable.id}}
                      Supprimer
                    / = link_to 'Supprimer totalement', delete_consommable_consommable_path(consommable), :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer le consommable définitivement ?" },:class => 'delete_consommable'
                  %td
                    = link_to 'Supprimer définitivement', consommable, :remote => true, method: :delete, data: { confirm: "Etes vous sur de vouloir supprimer le consommable définitivement de tous les système d'impression ?" },:class => 'delete_printer_consommable',style: ' -moz-user-select: none;background-image: none; border: 1px solid transparent; border-radius: 4px;   cursor: pointer; display: inline-block;  font-size: 14px; font-weight: normal;  line-height: 1.42857;  margin-bottom: 0;  padding: 6px 12px;   text-align: center;  vertical-align: middle;  white-space: nowrap; background-color: #337ab7; border-color: #2e6da4;  color: white;'
        
      - else
        %p Il n'y a pas de consommable à valider.
    / Fin de l'onglet
    / Onglet COMPTEUR Valider
    #compteurTrue.tab-pane.fade
      %h2 Relevé Compteur
      - if @releves_compteurs_true.count >= 1
        %table{:align => "center", :style => "width: 100%"}
          %thead
            %tr
              %th{:style => "text-align: center;"}
                ID
              %th{:style => "text-align: center;"}
                Méthode relevé compteur
              
              %th{:style => "text-align: center;"}
                Modifier ou supprimer le relevé compteur
              
          %tbody
            - @releves_compteurs_true.each do |releve_compteur|
              %tr
                %td{:align => "center"}
                  = link_to  releve_compteur.printer_id , releve_compteur
                %td{:align => "center"}
                  = cktext_area_tag("test_area#{releve_compteur.id}", releve_compteur.description_releve_compteurs, :disabled => true)
                  / = link_to  releve_compteur.description_releve_compteurs,releve_compteur
                %td{:align => "center"}
                  = link_to  "Voir relevé compteur", releve_compteur
                
      - else
        %p Il n'y a pas de releve compteur.
      
    / Fin de l'onglet
    #compteurFalse.tab-pane.fade
      %h2 Compteur Non validé
      - if @releves_compteurs_false.count >= 1
        %table.table-bordered{:align => "center", :style => "width: 100%;"}
          %thead
            %tr
              %th{:style => "text-align: center;"}
                ID
              %th{:style => "text-align: center;"}
                Méthode relevé compteur
              - if current_user.is? :ADMIN
                %th{:style => "text-align: center;"}
                  Valider modifier ou supprimer le relevé compteur

              
          %tbody
            - @releves_compteurs_false.each do |releve_compteur|
              %tr
                - if current_user.is? :ADMIN
                  %td{:align => "center"}
                    = link_to  releve_compteur.id, releve_compteur
                - else 
                  = releve_compteur.id
                %td{:align => "center"}
                  / = cktext_area :description_releve_compteurs , :ckeditor => {:height => '100'},:spellcheck => false, :required => true , disabled: true, :value => releve_compteur.description_releve_compteurs
                  = cktext_area_tag("test_area#{releve_compteur.id}", releve_compteur.description_releve_compteurs, :disabled => true)
                  / = link_to  releve_compteur.description_releve_compteurs,releve_compteur
                - if current_user.is? :ADMIN
                  %td{:align => "center"}
                    = link_to  "Voir relevé compteur", releve_compteur
      - else
        %p Il n'y a pas de releve compteur a valider .
      









    / Onglet AJOUTERINCIDENT
    #ajouterIncident.tab-pane.fade
      %h2 AJOUTER INCIDENT
      = simple_form_for @incident do |f|
        .CSSTableGenerator
          .table-responsive
            %table.table
              %tr
                %td Code Incident :
                %td Intitulé Incident :
              %tr
                %td.info
                  .col-md-9{:style => "width: 100%"}
                    .form-group
                      = f.input :code_incidents ,label: false, :required => true ,:input_html => { :size => 40, :maxlength => 20}
                    / /.col-lg-6
                  / /.row
                %td{}
                  .col-md-9{:style => "width: 100%"}
                    .form-group
                      = f.input :intitule_incidents ,label: false, :input_html => { :size => 40, :maxlength => 40 }
                    / /.col-lg-6
                  / /.row
            %table.table.table-bordered
              %tr
                %td Description :
                %td Solution :
              %tr
                %td
                  = f.cktext_area :description_incidents , :required => true, input_html: {style: "width: 400px;"}
                %td
                  = f.cktext_area :solution_incidents , :required => true
                  = f.hidden_field :printer_id, :value => @printer.id
                  = f.hidden_field :valide_incidents, :value => false
              %tr
                %td{:colspan => "2"}
                  .modal-footer{:align => "center"}
                    = f.button :submit, class: "btn btn-primary", :value => 'Valider'
      / ------------------------- Fin div css GENERATOR -------------------------
    / Fin de l'onglet AJOUTERINCIDENT
    / ---------------------- PAGE CONSOMMABLE     ----------------------
    #ajouterConsommable.tab-pane.fade
      %h2 Ajouter Consommable
      / Nav tabs
      %ul.nav.nav-tabs{:role => "tablist"}
        %li.active
          %a{"data-toggle" => "tab", :href => "#addConso", :role => "tab"} Ajouter Consommable
        %li
          %a{"data-toggle" => "tab", :href => "#searchConso", :role => "tab"} Rechercher Consommable existant
      / Tab panes
      .tab-content
        #addConso.tab-pane.fade.in.active
          = simple_form_for @consommable do |f|
            .CSSTableGenerator
              %table
                %tr
                  %td Code :
                  %td Designation :
                  %td Remplacement :
                  %td Durée de vie (page):
                %tr
                  %td
                    .col-md-9{:style => "width: 100%"}
                      .form-group
                        = f.input :code_consommables, label: false ,required: true,:input_html => { :size => 40, :maxlength => 20 }
                      / /.col-lg-6
                    / /.row
                  %td
                    .col-md-9{:style => "width: 100%"}
                      .form-group
                        = f.input :designation_consommables, label: false ,required: true,:input_html => { :size => 40, :maxlength => 254 }
                  %td
                    .col-md-9{:style => "width: 100%"}
                      .form-group
                        = f.collection_select :replacement_id, Replacement.all ,:id, :name
                      / /.col-lg-6
                    / /.row
                    %td
                      .col-md-9{:style => "width: 100%"}
                        .form-group
                          = f.input :duree_vie_consommables,required: true, label: false,:input_html => { :min => "0",   :type => "number", :value => "0"}
                          


              = f.hidden_field :printer_id, :value => @printer.id
              = f.hidden_field :consommable_id, :value => @consommable.id
              = f.hidden_field :valide_consommables, :value => false
              %table
                %tr
                %tr
                  %td
                    .modal-footer{:align => "center"}
                      = f.button :submit, class: "btn btn-primary", :value => 'Valider'
        #searchConso.tab-pane.fade
          / .CSSTableGenerator
          /   %table
          /     %tr
          /       %td Code :
          /       %td
          /       %td Designation :
          /       %td
          /     %tr
          /       %td
          /         .col-md-9{:style => "width: 100%"}
          /           .form-group
          /             %input#barreRecherche.form-control{:type => "text"}/
          /           / /.col-lg-6
          /         / /.row
          /       %td
          /         %button.boutton
          /           %span.glyphicon.glyphicon-ok
          /       %td
          /         .col-md-9{:style => "width: 100%"}
          /           .form-group
          /             %input#barreRecherche.form-control{:type => "text"}/
          /           / /.col-lg-6
          /         / /.row
          /       %td
          /         %button.boutton
          /           %span.glyphicon.glyphicon-ok
          / - if @Nbconsommable == 0
          /   - if @consommables_vide_search.count < 1
          /     %p il n'y a pas de consommable a ajouté
          /   - else
          /     %table.table.table-bordered
          /       %thead
          /         %tr
          /           %th id
          /           %th Code Consommables
          /           %th Designation Consommable 
          /           %th Valider
          /       %tbody
          /         - @consommables_vide_search.each do |consommable|
          /           %tr
          /             %td= consommable.id
          /             %td= consommable.code_consommables
          /             %td= consommable.designation_consommables
          /             %td
          /               = simple_form_for @printers_consommable  do |f|
          /                 = f.hidden_field :printer_id, :value => @printer.id
          /                 = f.hidden_field :consommable_id, :value => consommable.id
          /                 = f.button :submit, class: "btn btn-primary", data: { confirm: "Etes vous sur de vouloir ajouter ce consommable dans le printer actuel ?" },:value => 'Valider' 
          / - else

          / ********************* AVEC  RAILS AUTOCOMPLETE *********************
          = simple_form_for @consommable, url: search_consommables_path(@printer), method: :get do |f| 
            = f.autocomplete_field :code_consommables, autocomplete_consommable_code_consommables_consommables_path,:size => 75, :"data-autocomplete-label" => false,placeholder: "Entrez le code consommable"
            = f.hidden_field :printer_id, :value => @printer.id

          / = simple_form_for @consommable, :html => {:autocomplete => "off"}, url: search_conso_existant_consommables_path(@consommable) do |f|

          /   = f.input :code_consommables,name: "gdg", as: :string, :input_html => { :style => "width:500px",:autocomplete => "off" }, style: "display:none;", label: false, placeholder: "code consommable"
          %br
          %br
          %br
          / ********************************  TABLEAU DES CONSOMMABLE EXISTANT  ********************************
          / - if @consommables_search.count < 1 && @consommables_hide_in_printers_consommables.count < 1
          /   %p il n'y a pas de consommable a ajouté
          /   = @consommables_hide_in_printers_consommables.count
          /   = @consommables_search.count
          / - else
          /   %table.table.table-bordered
          /     %thead
          /       %tr
          /         %th id
          /         %th Code Consommables
          /         %th Designation Consommable 
          /         %th Valider
          /     %tbody
          /       - @consommables_search.each do |consommable|
          /         %tr
          /           %td= consommable.id
          /           %td= consommable.code_consommables
          /           %td= consommable.designation_consommables
          /           %td
          /             = simple_form_for @printers_consommable  do |f|
          /               = f.hidden_field :printer_id, :value => @printer.id
          /               = f.hidden_field :consommable_id, :value => consommable.id
          /               = f.button :submit, class: "btn btn-primary", data: { confirm: "Etes vous sur de vouloir ajouter ce consommable dans le printer actuel ?" },:value => 'Ajouter' 
          /       - @consommables_hide_in_printers_consommables.each do |consommable|
          /         %tr
          /           %td= consommable.id
          /           %td= consommable.code_consommables
          /           %td= consommable.designation_consommables
          /           %td
          /             = simple_form_for @printers_consommable  do |f|
          /               = f.hidden_field :printer_id, :value => @printer.id
          /               = f.hidden_field :consommable_id, :value => consommable.id
          /               = f.button :submit, class: "btn btn-primary", data: { confirm: "Etes vous sur de vouloir ajouter ce consommable dans le printer actuel ?" },:value => 'Ajouter'
    / -----------------------------------------  FIN PAGE CONSOMMABLE ------------------------
    #ajouterCompteur.tab-pane.fade
      %h2 Ajouter Compteur
      = simple_form_for @releve_compteur do |f|
        .CSSTableGenerator
          %table
            %tr
              %td Description :
            %tr
              %td
                .col-md-9{:style => "width: 100%"}
                  .form-group
                    = f.cktext_area :description_releve_compteurs, label: false 
          = f.hidden_field :printer_id, :value => @printer.id
          = f.hidden_field :consommable_id, :value => @consommable.id
          = f.hidden_field :valide_releve_compteurs, :value => false
          %table
            %tr
            %tr
              %td
                .modal-footer{:align => "center"}
                  = f.button :submit, class: "btn btn-primary ", :value => 'Valider'
%br/
%br/
%br/
%br/
%br/
%br/
%br/
%br/
%br/
%br/

    
      
 